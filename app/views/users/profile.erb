<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link href="https://fonts.googleapis.com/css2?family=Bilbo+Swash+Caps&display=swap" rel="stylesheet">
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>

    <style>
      body {
        background-color: rgba(248, 248, 248, 0.726);
      }
      .post {
        opacity: 0.75;
      }
      .post:hover {
        opacity: 1;
      }
      .button:hover{
        background: none;
        border:none;
      }
    </style>
    <title>Profile</title>
  </head>
  <body>
    <!--icons https://icons.getbootstrap.com/-->

    <nav
      class="navbar fixed-top navbar-expand-lg navbar-light"
      style="
        background-color: white;
        border: 1px solid rgb(192, 184, 184);
        border-right: none;
      "
    >
    <div class="container" style="width:74%">
      <a href="/" class="col-4" style="font-family: Bilbo Swash Caps; font-size: 1.5rem; padding:0px"><img width="100vh"src="https://www.dafont.com/forum/attach/orig/7/3/737566.png?1"/></a>
     
     
      <a href="#" class="col-5 center" 
        ><form class="form-inline">
          <input
            type="text"
            class="col-xs-4 form-control"
            style="width: 13rem; height: 1.7rem; background: rgba(var(--b3f,250,250,250),1); border: solid 1px rgba(var(--b6a,219,219,219),1);"
            placeholder="Search"
          /></form
      ></a>
     
    <ul class="navbar-nav  col-3 justify-content-end" style="padding:0px; margin:0px; " >
      <li class="nav-item active">
        <a class="nav-link" href="#">
        
                    <svg
              class="bi bi-house-door-fill"
              width="1.5em"
              viewBox="0 0 16 16"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M6.5 10.995V14.5a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .146-.354l6-6a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 .146.354v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5V11c0-.25-.25-.5-.5-.5H7c-.25 0-.5.25-.5.495z"
              />
              <path
                fill-rule="evenodd"
                d="M13 2.5V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"
              />
            </svg>
         <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">
                    <svg
              class="bi bi-inbox"
              width="1.5em"
              viewBox="0 0 16 16"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M3.81 4.063A1.5 1.5 0 0 1 4.98 3.5h6.04a1.5 1.5 0 0 1 1.17.563l3.7 4.625a.5.5 0 0 1-.78.624l-3.7-4.624a.5.5 0 0 0-.39-.188H4.98a.5.5 0 0 0-.39.188L.89 9.312a.5.5 0 1 1-.78-.624l3.7-4.625z"
              />
              <path
                fill-rule="evenodd"
                d="M.125 8.67A.5.5 0 0 1 .5 8.5H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0 .5.5 0 0 1 .5-.5h5.5a.5.5 0 0 1 .496.562l-.39 3.124a1.5 1.5 0 0 1-1.489 1.314H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .121-.393zm.941.83l.32 2.562a.5.5 0 0 0 .497.438h12.234a.5.5 0 0 0 .496-.438l.32-2.562H10.45a2.5 2.5 0 0 1-4.9 0H1.066z"
              />
            </svg>
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link " href="#">
                   <svg
              class="bi bi-heart-fill"
              width="1.5em"
              viewBox="0 0 16 16"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"
              />
            </svg>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link " href="#">
                 <svg
              class="bi bi-upload"
              width="1.5em"
              viewBox="0 0 16 16"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
              data-target="#uploadModal"
              data-toggle="modal"
              class="btn"
            >
              <path
                fill-rule="evenodd"
                d="M.5 8a.5.5 0 0 1 .5.5V12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8.5a.5.5 0 0 1 1 0V12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8.5A.5.5 0 0 1 .5 8zM5 4.854a.5.5 0 0 0 .707 0L8 2.56l2.293 2.293A.5.5 0 1 0 11 4.146L8.354 1.5a.5.5 0 0 0-.708 0L5 4.146a.5.5 0 0 0 0 .708z"
              />
              <path
                fill-rule="evenodd"
                d="M8 2a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0v-8A.5.5 0 0 1 8 2z"
              />
            </svg>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link " href="/user/<%=@you.username%>">
           <img
           style="border-radius: 50%;"
                   width="30vw"
                   height="30vh"
                    src="<%=@you.profile_img%>"
            />
        </a>
      </li>
    </ul>
          </div>
        </div>
      </a>
    </div>

    </nav>

    <!--Profile -->

<div class="container" style="margin-top:100px; width:72% margin-bottom:25px">
    <div class="row" >
        <div class="col-4" style="text-align:center;" >
            <img 
            class="rounded-circle"
            width="40%"
            height="70%"
            src="<%=@user.profile_img%>"
               data-target="#profileModal"
              data-toggle="modal"
          />
        </div>
        <div class="col-4">
            <div class="row" style="margin-bottom: 10px;">
                <div class="col-7" style="font-size: 2rem"><%=@user.username%></div>
                        <%# if this is your profile %>
                        <%if @user.id == @you.id%>
                            <div class="col-5 " style="text-align:center;"><a style="padding-right: 5px; text-decoration: none;"href="/accounts/edit">
                            <button style="cursor: pointer; font-size: 12px; width: rem; height: 1.8rem; background: rgba(var(--b3f,250,250,250),1); border: solid 1px rgba(var(--b6a,219,219,219),1);">Edit Profile</button>
                            </a><svg  style="cursor: pointer;" data-target="#settingsmodal"
                                data-toggle="modal" class="bi bi-gear-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 0 0-5.86 2.929 2.929 0 0 0 0 5.858z"/>
                            </svg></div>
                        <%else%>
                        <%# if this not your profile %>
                            <%if @you.following.include?(@user)%>
                                <form action="/user/<%=@user.username%>" method="POST">
                                    <input type="hidden" name="unfollow" value=<%=@user.id%>>
                                    <input type="submit" value="Unfollow">
                                </form>
                        <% else%>
                                <form action="/user/<%=@user.username%>" method="POST">
                                    <input type="hidden" name="follow" value=<%=@user.id%>>
                                    <input type="submit" value="Follow">
                                </form>
                        <% end%>
                        <%end%>
              </div>
           
              <!--posts, followers, following-->
              <div class="row">
                <div class="col-6 col-md-4"><%=@you.posts.length%> posts</div>
                <div data-target="#followersmodal"
              data-toggle="modal" class="col-6 col-md-4"><%=@user.followers.size%> Followers</div>
                <div class="col-6 col-md-4" data-target="#followingmodal"
              data-toggle="modal"><%=@user.following.size%> Following</div>
              </div>
              
              <!-- Bio -->
              <div class="row">
                <div class="col-6"><b><%=@user.firstname%> <%=@user.lastname%></b></div>
              </div>
              <div class="row">
                <div class="col-12"><%=@user.bio%></div>
              </div>
        </div>
    </div>
</div>

<div class="container" style="width:73%">
    <div class="row">

        <%@user.posts.map do |post|%>
        <div class="col-4">
        <a href="/post/<%=post.id%>">
            <img
            class="post"
            width="100%"
            height="100%"
            src="<%=post.img_url%>"
          />
          </a>
        </div>
        <%end%>
      </div>
</div>


 <!-- Modal for upload-->
 <div
      class="modal fade "
      id="uploadModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog " role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">
              Enter Image address or video url
            </h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <form action="/post" method="POST">
          <%if @error%>
          <p style="text-align: center;"><%=@error%></p>
          <%end%>
          <div class="modal-body">
               <label for="Url">Url: </label>
               <input type="text" name="url" id="url"/>
          </div>
          <div class="modal-body">
               <label for="Description">Description: </label>
               <input maxlength = "250" type="text" name="description" id="description"/>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Close
            </button>
            <button type="submit" class="btn btn-primary">
              Post Image or Video Url
            </button>
            </form>
          </div>
        </div>
      </div>
    </div>


<!--Modal for settings -->
       <div
      class="modal fade"
      id="settingsmodal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
<div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-body">
         <a href="/logout">
           <p
              style="
                text-align: center;
                border-bottom: 1px solid rgb(212, 212, 212);
                padding-bottom: 10px;
                color: black;
                text-decoration: none;
              "
            >
              Log Out
            </p>
         </a>
            <p
              style="
                text-align: center;
                border-bottom: 1px solid rgb(212, 212, 212);
                padding-bottom: 10px;
              "
              data-dismiss="modal"
            >
              cancel
            </p>
          </div>
        </div>
      </div>
    </div>

 <!-- Modal for change profile image -->
 <div
      class="modal fade "
      id="profileModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog " role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">
              Change Profile Image
            </h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <form action="/user/profile_img" method="POST">
          <%if @error%>
          <p style="text-align: center;"><%=@error%></p>
          <%end%>
          <div class="modal-body">
               <label for="Url">Url: </label>
               <input type="text" name="url" id="url"/>
          </div>

          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Close
            </button>
            <button type="submit" class="btn btn-primary">
              Post Image or Video Url
            </button>
            </form>
          </div>
        </div>
      </div>
    </div>

</div class="container">
    <!-- Followers-->
    <div
      class="modal fade"
      id="followersmodal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-body">
          <div class="row">
            <div style="text-align: center" class="col-11">
            Followers
            </div>
            <div class="col-1">
                        <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
            </div>
          </div>

          <%@user.followers.map do |user|%>
           <div class="row">
            <div class="col-1">
              <img width="30vh" src="<%=user.profile_img%>"/>
            </div>

            <div class="col-8">
              <%=user.username%>
            </div>

            <div class="col-3">
            <%if @user.following.include?(user)%>
                  <form action="/user/<%=user.username%>" method="POST">
                                    <input type="hidden" name="unfollow" value=<%=user.id%>>
                                    <input type="submit" value="following">
                                </form>
              <%else%>
                    <form action="/user/<%=user.username%>" method="POST">
                                    <input type="hidden" name="follow" value=<%=user.id%>>
                                    <input type="submit" value="follow">
                                </form>
            <%end%>
            </div>
           </div>
          <%end%>
          </div>
        </div>
      </div>
    </div>


</div class="container">
    <!-- Following -->
    <div
      class="modal fade"
      id="followingmodal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-body">
          <div class="row">
            <div style="text-align: center" class="col-11">
            Followers
            </div>
            <div class="col-1">
                        <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
            </div>
          </div>

          <%@user.following.map do |user|%>
           <div class="row">
            <div class="col-1">
              <img width="30vh" src="<%=user.profile_img%>"/>
            </div>

            <div class="col-8">
              <%=user.username%>
            </div>

            <div class="col-3">
            <%if @user.following.include?(user)%>
               <form action="/user/<%=user.username%>" method="POST">
                                    <input type="hidden" name="unfollow" value=<%=user.id%>>
                                    <input type="submit" value="following">
                                </form>
              <%else%>
                <form action="/user/<%=user.username%>" method="POST">
                                    <input type="hidden" name="follow" value=<%=user.id%>>
                                    <input type="submit" value="follow">
                                </form>
            <%end%>
            </div>
           </div>
          <%end%>
          </div>
        </div>
      </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
  </body>
</html>