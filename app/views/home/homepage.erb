<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link rel="icon" width="100%"href="https://toppng.com/public/uploads/preview/ew-instagram-logo-transparent-related-keywords-logo-instagram-vector-2017-115629178687gobkrzwak.png">
    <link href="https://fonts.googleapis.com/css2?family=Bilbo+Swash+Caps&display=swap" rel="stylesheet">
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>

    <style>
      body {
        background-color: rgba(248, 248, 248, 0.726);
      }
    </style>
    <title>Instagram</title>
  </head>
  <body>
    <!--icons https://icons.getbootstrap.com/-->
    <nav
      class="navbar fixed-top navbar-expand-lg navbar-light"
      style="
        background-color: white;
        border: 1px solid rgb(192, 184, 184);
        border-right: none;
      "
    >
    <div class="container" style="width:74%">
      <a href="/" class="col-4" style="font-family: Bilbo Swash Caps; font-size: 1.5rem; padding:0px"><img width="100vh"src="https://www.dafont.com/forum/attach/orig/7/3/737566.png?1"/></a>
     
     
      <a href="#" class="col-5 center" 
        ><form class="form-inline">
          <input
            type="text"
            class="col-xs-4 form-control"
            style="width: 13rem; height: 1.7rem; background: rgba(var(--b3f,250,250,250),1); border: solid 1px rgba(var(--b6a,219,219,219),1);"
            placeholder="Search"
          /></form
      ></a>
     
    <ul class="navbar-nav  col-3 justify-content-end" style="padding:0px; margin:0px; " >
      <li class="nav-item active">
        <a class="nav-link" href="#">
        
                    <svg
              class="bi bi-house-door-fill"
              width="1.5em"
              viewBox="0 0 16 16"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M6.5 10.995V14.5a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .146-.354l6-6a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 .146.354v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5V11c0-.25-.25-.5-.5-.5H7c-.25 0-.5.25-.5.495z"
              />
              <path
                fill-rule="evenodd"
                d="M13 2.5V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"
              />
            </svg>
         <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">
                    <svg
              class="bi bi-inbox"
              width="1.5em"
              viewBox="0 0 16 16"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M3.81 4.063A1.5 1.5 0 0 1 4.98 3.5h6.04a1.5 1.5 0 0 1 1.17.563l3.7 4.625a.5.5 0 0 1-.78.624l-3.7-4.624a.5.5 0 0 0-.39-.188H4.98a.5.5 0 0 0-.39.188L.89 9.312a.5.5 0 1 1-.78-.624l3.7-4.625z"
              />
              <path
                fill-rule="evenodd"
                d="M.125 8.67A.5.5 0 0 1 .5 8.5H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0 .5.5 0 0 1 .5-.5h5.5a.5.5 0 0 1 .496.562l-.39 3.124a1.5 1.5 0 0 1-1.489 1.314H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .121-.393zm.941.83l.32 2.562a.5.5 0 0 0 .497.438h12.234a.5.5 0 0 0 .496-.438l.32-2.562H10.45a2.5 2.5 0 0 1-4.9 0H1.066z"
              />
            </svg>
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link " href="#">
                   <svg
              class="bi bi-heart-fill"
              width="1.5em"
              viewBox="0 0 16 16"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"
              />
            </svg>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link " href="#">
                 <svg
              class="bi bi-upload"
              width="1.5em"
              viewBox="0 0 16 16"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
              data-target="#uploadModal"
              data-toggle="modal"
              class="btn"
            >
              <path
                fill-rule="evenodd"
                d="M.5 8a.5.5 0 0 1 .5.5V12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8.5a.5.5 0 0 1 1 0V12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8.5A.5.5 0 0 1 .5 8zM5 4.854a.5.5 0 0 0 .707 0L8 2.56l2.293 2.293A.5.5 0 1 0 11 4.146L8.354 1.5a.5.5 0 0 0-.708 0L5 4.146a.5.5 0 0 0 0 .708z"
              />
              <path
                fill-rule="evenodd"
                d="M8 2a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0v-8A.5.5 0 0 1 8 2z"
              />
            </svg>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link " href="/user/<%=@you.username%>">
           <img
           style="border-radius: 50%;"
                   width="30vw"
                   height="30vh"
                    src="<%=@you.profile_img%>"
            />
        </a>
      </li>
    </ul>
          </div>
        </div>
      </a>
    </div>
    </nav>

    <div class="container" style="padding-top: 100px;  width:72%">
      <div class="row">
        <div class="col-8">
          <!--left column cards-->
          <%@posts.map do |post|%>

   <div class="card" style="width: 100%; margin-bottom: 20px;">
            <div class="media">
            <a class="nav-link " href="/user/<%=post.user.username%>">
              <img
                style="border-radius: 50%;"
                   width="35vw"
                   height="35vh"
                src="<%=post.user.profile_img%>"
                alt="Generic placeholder image"
              />
              </a>
              <div class="media-body">
                <p><b> <a class="nav-link " style="font-size: 14px; color: black;"href="/user/<%=post.user.username%>"><%=post.user.username%></a></b></p>
              </div>
              <p
                style="padding-right: 15px;"
                data-target="#postModal<%=post.id%>"
                data-toggle="modal"
                class="btn"
              >
                <b>...</b>
              </p>
            </div>
            <img
              class="card-img-top"
              src="<%=post.img_url%>"
              alt="Card image cap"
            />
            <div class="card-body">
            <!--heart-->
              <%h = post.hearts.select{|a| @you.hearts.include?(a)}%>

            <form action ="/" method="POST">
                 <input type="hidden" name="heart" <%if h.empty?%> value="none" <%else%> value=<%=h.first.id%><%end%> >
                 <input type="hidden" name="post" value=<%=post.id%>>
              <button style="border: none; background:none; cursor: pointer; "type="submit">
                  <%if !h.empty?%>

<svg class="bi bi-heart-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
</svg>
                  <%else %>

                  <svg class="bi bi-heart" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" d="M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
</svg>
                  <%end%>
              </button>
            </form>
                <%if post.hearts.length < 2%>
              <p><%=post.hearts.length%> like <p>
              <%else%>
              <p><%=post.hearts.length%> likes <p>
              <%end%>
              <p class="card-text">
                <a style="font-size: 14px; color: black; text-decoration:none;"  href="/user/<%=post.user.username%>"><b><%=post.user.username%></b> </a><%=post.description%>
              </p>
              <form action="/post/<%=post.id%>" method="POST">
                  <input class="button"style="width: 100%; border:none; outline: none; border-top: 1px solid; border-top-color:rgb(230, 230, 230);" name="comment" id="comment" placeholder="add comment"/>
              </form>
         
            </div>
          </div>

            <div
      class="modal fade"
      id="postModal<%=post.id%>"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-body">
            
            <%if post.user != @you%>
    <p
            >
                <form   style="
                text-align: center;
                border-bottom: 1px solid rgb(212, 212, 212);
                padding-bottom: 10px;
                
              " action="/user/<%=post.user.username%>" method="POST">
                                    <input type="hidden" name=unfollow value=<%=post.user.id%>>
                                    <input style="background-color: white;
                border: none; cursor: pointer;" type="submit" value="Unfollow">
                                </form>
            </p>
            <%end%>
            <p
              style="
                text-align: center;
                border-bottom: 1px solid rgb(212, 212, 212);
                padding-bottom: 10px;
              "
            >
              <a  style="text-decoration: none; color: black; cursor: pointer;"href="/post/<%=post.id%>">Go to post </a>
            </p>
            <p
              style="
                text-align: center;
                border-bottom: 1px solid rgb(212, 212, 212);
                padding-bottom: 10px;
              "
              data-dismiss="modal"
            >
              cancel
            </p>
          </div>
        </div>
      </div>
    </div>
       <%end%>
        </div>
        <!--right column-->
        <div class="col-4" style=" padding: 0px; margin: 0px">
          <div  style="position: fixed;">
            <!--profile image-->
            <div class="media">
            <a href="/user/<%=@you.username%>">
              <img
                class="align-self-start mr-3"
                style="border-radius: 50%;"
                   width="50vw"
                   height="50vh"
                src="<%=@you.profile_img%>"
                alt="Generic placeholder image"
              />
              </a>
              <div class="media-body">
                <p style="font-size: 14px; margin:0px; padding:0px"><b> <a  style=" color: black; text-decoration:none; "href="/user/<%=@you.username%>"><%=@you.username%></a></b></p>
                <p style="font-size: 12px; color: grey; text-decoration:none;"><%=@you.firstname%> <%=@you.lastname%></p>
              </div>
            </div>
            <!--profile image-->
            <!--Suggestions table-->
            <!--Headers suggestions/see all-->
            <div class="row">
              <div class="col-10" style="font-size: 14px; color: grey">Suggestions For You</div>
              <div class="col-2" style="font-size: 14px; padding: 0px; margin: 0px">
                See all
              </div>
            </div>
            <!--profiles/follow-->
                <% @users.map do |user|%>
                      
                               <div class="row">
                                        <div class="col-10" style="margin-top:5px;">
                                                <div class="media">
                                                <img
                                                class="align-self-start mr-3"
                                                width="30vw"
                                                src="<%=user.profile_img%>"
                                                alt="Generic placeholder image"
                                                />
                                                <div class="media-body">
                                                <p><b><a style="font-size:14px; color: black; text-decoration:none; " href="/user/<%=user.username%>"><%=user.username%></a></b></p>
                                                </div>
                                                </div>
                                        </div>
                                        <div class="col-2" style="margin:0px; padding:0px; margin-top:5px;">
                                          <form action="/user/<%=user.username%>" method="POST">
                                             <input type="hidden" name="follow" value=<%=user.id%>>
                                            <button style="font-size: 12px; cursor: pointer; color:rgb(111, 206, 235); background:none; text-decoration:none; border:none;" type="submit" value="Follow" >Follow</button>
                                          </form> 
                                                
                                        </div>
                          </div>
                <%end%>
   
            <div class="row">
             <div class="col-12">
              <p style="font-size: 12px; color: rgb(205, 207, 207);">&#169; 2020 Instagram Made By GERMAN CRUZ</p>
             </div>
            </div>
            <!--Suggestions table-->
          </div>
        </div>
        <!--end of right column-->
      </div>
      <!--End of container-->
    </div>

    <!-- Modal for upload-->
    <div
      class="modal fade "
      id="uploadModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog " role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">
              Enter Image address or video url
            </h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <form action="/post" method="POST">
          <%if @error%>
          <p style="text-align: center;"><%=@error%></p>
          <%end%>
          <div class="modal-body">
               <label for="Url">Url: </label>
               <input type="text" name="url" id="url"/>
          </div>
          <div class="modal-body">
               <label for="Description">Description: </label>
               <input maxlength = "250" type="text" name="description" id="description"/>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Close
            </button>
            <button type="submit" class="btn btn-primary">
              Post Image or Video Url
            </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for each post-->
  
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
<!--Add if statement for @error-->
<%puts @error%>
<%if @error%>
    <script>
    $(function() {
    $('#uploadModal').modal('show');
});
    </script>
    <%end%>
  </body>
</html>
